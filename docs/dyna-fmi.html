<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Docker와 FMI를 이용한 LS-Dyna Cosimulation &mdash; KOSTECH Documentation  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/my_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="시작하기" href="start_lamp.html" />
    <link rel="prev" title="Welcome to KOSTECH documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            KOSTECH Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">COSIMULATION</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Docker와 FMI를 이용한 LS-Dyna Cosimulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xming">2. Xming 설치하기</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker">3. docker 설치 및 예제 실행</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LAMP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="start_lamp.html">시작하기</a></li>
<li class="toctree-l1"><a class="reference internal" href="gen_material.html">재료 물성 카드 생성</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">데이터베이스</a></li>
<li class="toctree-l1"><a class="reference internal" href="gen_strain_rate_curve.html">Strain Rate 커브 생성</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">KOSTECH Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Docker와 FMI를 이용한 LS-Dyna Cosimulation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/dyna-fmi.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="docker-fmi-ls-dyna-cosimulation">
<h1>Docker와 FMI를 이용한 LS-Dyna Cosimulation<a class="headerlink" href="#docker-fmi-ls-dyna-cosimulation" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#docker-fmi-ls-dyna-cosimulation">Docker와 FMI를 이용한 LS-Dyna Cosimulation</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction">1. Introduction</a></p></li>
<li><p><a class="reference internal" href="#xming">2. Xming 설치하기</a></p></li>
<li><p><a class="reference internal" href="#docker">3. docker 설치 및 예제 실행</a></p></li>
</ul>
</li>
</ul>
<section id="introduction">
<h2>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>해당 문서는 docker를 사용하여 LS-Dyna에서 FMI를 통한 Cosimulation에 대한 내용을 설명합니다.<br />
docker의 실행은 Windows 운영체제에서 테스트 되었으며, linux 및 mac os에서는 테스트 되지 않았습니다.</p>
</section>
<section id="xming">
<h2>2. Xming 설치하기<a class="headerlink" href="#xming" title="Permalink to this heading"></a></h2>
<p>Xming은 이후에 진행되는 LS-Dyan와 FMI의 Cosimulation에서 python을 이용하여 LS-Dyna 시뮬레이션이 진행되면서 각 time-step의 결과들을 얻고 얻은 결과을 이용하여 계산된 결과들을 plot 할 때 생성되는 gui를 표시할 서버를 연결시키기 위한 도구로 사용됩니다. Xming은 아래 링크에서 다운로드 받을 수 있습니다.</p>
<p><a class="reference external" href="https://sourceforge.net/projects/xming/">https://sourceforge.net/projects/xming/</a></p>
</section>
<section id="docker">
<h2>3. docker 설치 및 예제 실행<a class="headerlink" href="#docker" title="Permalink to this heading"></a></h2>
<ul>
<li><p>설치하기<br />
docker는 아래 링크에서 플랫폼별 docker를 다운로드 받을 수 있습니다. 이 후 docker의 설치과정에 대한 설명은 생략합니다.</p>
<p><a class="reference external" href="https://www.docker.com/">https://www.docker.com/</a></p>
<p>설치가 완료되면 아래 사진과 같은 실행화면을 확인할 수 있습니다.</p>
<p><img alt="docker 실행 화면" src="_images/docker1.png" /></p>
</li>
<li><p>docker 이미지 다운로드<br />
docker 실행 화면에서 아래 사진과 같이 상단 Search에 kostech/ubuntu-fmi를 입력 후 검색되는 항목에서 Pull을 클릭하여  이미지를 다운로드 받습니다. 해당 이미지는 ubuntu 환경에서 LS-Dyna를 이용한 FMI Cosimulation을 테스트 하기 위한
Python 및 필요한 설정들이 되어 있습니다.</p>
<p><img alt="kostech/ubuntu-fmi 이미지 검색 및 Pull" src="_images/docker2.png" /></p>
</li>
<li><p>FMI 예제 파일 다운로드<br />
아래 링크에서 FMI 예제 파일을 다운로드 받습니다.</p>
<p><a class="reference external" href="https://drive.google.com/file/d/1Z_kcDda29U1VxK_le0MivgaSCJPDzhJK/view?usp=share_link">https://drive.google.com/file/d/1Z_kcDda29U1VxK_le0MivgaSCJPDzhJK/view?usp=share_link</a></p>
<p>다운로드 받은 후 압축을 해제합니다. 설명을 위해 여기서는 압축을 해제한 폴더를 D:\dyna-fmi로 가정하겠습니다.</p>
</li>
<li><p>docker 컨테이너 생성 및 실행<br />
Windows에서 Command Window 창을 실행하고 다음 명령어를 입력합니다.</p>
<p>docker run –cap-add=NET_ADMIN -e DISPLAY=host.docker.internal:0.0 -p 39400:39400 –volume D:\dyna-fmi:/home/workspace –name=fmi -it kostech/ubuntu-fmi:1.0</p>
<p>위 명렁어를 입력하게 되면 아래 사진과 같이 linux 환경으로 접속됩니다. 아래 사진에서 –volume=E:\CWJUN\docker\dyna-fmi는 위에서 가정한 D:\dyna-fmi 경로에 대한 작성자 본인의 디렉토리이므로
각자 FMI 예제 파일을 압축 해제한 경로로 입력하시면 됩니다. 여기서 cd /home/workspace를 입력한 후 ll 명령어로 디렉토리를 확인하면 D:\dyna-fmi 경로가 mapping되어 있는 것을 확인 할 수 있으며
상호 동기화 되기 때문에 –volume으로 공유한 경로에 대해서는 파일 추가/삭제/수정 등의 작업등을 Windows 환경에서 하실 수 있습니다.</p>
<p><img alt="Command 창에서 docker 컨테이너 실행" src="_images/docker4.png" /></p>
</li>
<li><p>예제 (case8_airbag) 실행<br />
“cd /home/workspace/fmu/dyna_key/case8_airbag” 을 입력하여 예제가 있는 경로로 이동합니다.</p>
<p><img alt="" src="_images/docker5.png" /></p>
<p>run_case1.sh 파일과 run_case2.sh 파일에서 LSTC_LICENSE_SERVER 값을 본인 LS-Dyna 라이선스 서버 호스트로 변경합니다.</p>
<p><img alt="" src="_images/docker6.png" /></p>
<p>./run_case1.sh 명령어를 통해 case1을 실행합니다. 해석이 종료된 이후에는 아래 사진과 같이 case2를 진행하는데 필요한 파일들이 생성됩니다.</p>
<p><img alt="case1 해석 후의 파일 리스트" src="_images/docker7.png" /></p>
<p>다음으로 ./run_case2.sh 명령어를 통해 case2를 실행합니다. 실행 후 아래 사진과 같이 ‘Listening for incoming connections on port: 39400 …’ 메세지 이후로 진행되지 않고 대기중인 상태에서 새로운 Command Windows 창을 실행 합니다.</p>
<p><img alt="case2 해석 진행 대기 상태" src="_images/docker8.png" /></p>
<p>새로 실행한 Command Windows 창에서 docker exec -it fmi /bin/bash 명령어를 입력하여 docker 컨테이너에 접속합니다. 접속 후 아래 사진과 같이 예제 경로로 이동 후에 python2.7 fmi_bouncing_ball_native.py를 입력하여 LS-Dyna에서 계산되는 각 스텝의 결과를 처리하기 위한 python 코드를 실행합니다.</p>
<p><img alt="python 코드 실행" src="_images/docker9.png" /></p>
<p>python 코드를 실행하게 되면 대기 중이던 case2 해석이 진행되며 해석이 종료 된 후에서 python 코드에서 계산된 결과들에 대한 그래프가 나타납니다.</p>
<p><img alt="계산 결과" src="_images/docker10.png" /></p>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to KOSTECH documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="start_lamp.html" class="btn btn-neutral float-right" title="시작하기" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, cwjun.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>